<!--
 * @Author: JA
 * @Date: 2022-08-30 14:44:54
 * @LastEditTime: 2022-08-30 17:39:03
 * @LastEditors: JA
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LRU</title>
</head>

<body>
    <script>
        class LRUCache {
            constructor(capacity) {
                //容积
                this.capacity = capacity
                this.map = new Map()
                //map是无序的，通过数组维护插入顺序
                this.arr = []
            }

            get(key) {
                const index = this.arr.indexOf(key)
                if (index === -1) {
                    return index
                } else {
                    this.arr.splice(index, 1)
                    this.arr.unshift(key)
                    return this.map.get(key)
                }
            }

            put(key, value) {
                const index = this.arr.indexOf(key)
                if (this.arr.length >= this.capacity && index === -1) {
                    const delKey = this.arr.pop()
                    this.map.delete(delKey)
                }
                if (index === -1) {
                    this.arr.unshift(key)
                } else {
                    this.arr.splice(index, 1)
                    this.arr.unshift(key)
                }
                this.map.set(key, value)
            }
        }
        //-1 3
        // console.log(lRUCache.arr);
        const lRUCache = new LRUCache(2);
        lRUCache.put(2, 1)
        lRUCache.put(1, 1)
        lRUCache.put(2, 3)
        // console.log(lRUCache.arr,lRUCache.map);
        lRUCache.put(4, 1)
        console.log(lRUCache.get(1));
        console.log(lRUCache.get(2));
    </script>
</body>

</html>